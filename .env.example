# ===========================
# RiftTalk configuration
# ===========================
# Modes:
#  - client: runs LCU locally + proxies Discord ops to remote server (recommended for end users)
#  - server: runs the single Discord bot + OAuth + room creation (you run this on your remote VPS)
APP_MODE=client

# Shared key used for client->server API authentication (MUST match on client and server)
RIFT_SHARED_KEY=CHANGE_ME_TO_A_LONG_RANDOM_SECRET

# Remote server base URL (CLIENT MODE ONLY), e.g. https://your-domain.com
REMOTE_SERVER_URL=https://your-domain.com

# Public base URL of the server (SERVER MODE RECOMMENDED).
# If you don't have a domain yet, use a tunnel URL (ngrok/cloudflared) for testing.
PUBLIC_BASE_URL=https://your-domain.com

# ===========================
# Marketing site (optional)
# ===========================
# If set, the server will serve the marketing site from this directory.
# Defaults to: ./rifttalk-site (repo root) when present.
RIFT_MARKETING_DIR=rifttalk-site

# ===========================
# Server bind (local)
# ===========================
SERVER_HOST=127.0.0.1
SERVER_PORT=8000
DEBUG=false
ENVIRONMENT=development

# ===========================
# Redis
# ===========================
REDIS_URL=redis://localhost:6379
REDIS_SSL=false
REDIS_MAX_CONNECTIONS=20

# ===========================
# Client request protection (server)
# ===========================
RIFT_SIGNATURE_ENABLED=true
RIFT_SIGNATURE_TTL_SECONDS=60
RIFT_RATE_LIMIT_ENABLED=true
RIFT_RATE_LIMIT_PER_MINUTE=60


# ===========================
# JWT (local client UI session)
# ===========================
JWT_SECRET_KEY=CHANGE_ME_TOO
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ===========================
# LCU (client mode)
# ===========================
LCU_UPDATE_INTERVAL=5

# ===========================
# Discord (SERVER MODE ONLY)
# ===========================
DISCORD_BOT_TOKEN=SUPER_SECRET_DISCORD_TOKEN
DISCORD_GUILD_ID=SUPER_SECRET_GUILD_ID
DISCORD_AUTO_CREATE_CHANNELS=true

# Cleanup
CLEANUP_INTERVAL_SECONDS=60
CLEANUP_INACTIVE_GRACE_SECONDS=120
CLEANUP_STALE_EMPTY_ROOM_HOURS=6
CLEANUP_LOBBY_TTL_MINUTES=60

DISCORD_GC_ON_STARTUP=true
DISCORD_GC_STALE_HOURS=6
DISCORD_GC_MIN_AGE_MINUTES=10

# ===========================
# Discord OAuth2 (SERVER MODE ONLY)
# ===========================
DISCORD_OAUTH_CLIENT_ID=YOUR_OAUTH_CLIENT_ID
DISCORD_OAUTH_CLIENT_SECRET=YOUR_OAUTH_CLIENT_SECRET
# Optional: if empty, server will use: {PUBLIC_BASE_URL}/api/public/discord/callback
DISCORD_OAUTH_REDIRECT_URI=
DISCORD_OAUTH_SCOPES=identify
DISCORD_OAUTH_STATE_TTL_SECONDS=600
